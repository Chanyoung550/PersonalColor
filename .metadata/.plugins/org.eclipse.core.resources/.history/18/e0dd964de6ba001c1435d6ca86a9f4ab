package com.personalColor.pc.Utils;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.InputStreamReader;

public class Command {

	public String startPython(String[] path) {
		
		try{
			// 파일의 경로 + 파일명
	        String filePath = "/Users/chan/PersonalColor/pcbackend/src/main/resources/static/src/res.txt";
	        
	        File deleteFile = new File(filePath);
	 
	        // 파일이 존재하는지 체크 존재할경우 true, 존재하지않을경우 false
	        if(deleteFile.exists()) {
	            
	            // 파일을 삭제합니다.
	            deleteFile.delete(); 
	            
	            System.out.println("파일을 삭제하였습니다.");
	            
	        } else {
	            System.out.println("파일이 존재하지 않습니다.");
	        }
			
			System.out.println(path[0]);
			System.out.println(path[1]);///bin/sh && source /Users/chan/opt/anaconda3/etc/profile.d/conda.sh && 
//			ProcessBuilder processBuilder = new ProcessBuilder();
//			processBuilder.command("/bin/bash -c pwd && source activate pcolor && python3 /Users/chan/PersonalColor/pcbackend/src/main/resources/static/src/main.py --image /Users/chan/PersonalColor/pcbackend/src/main/resources/static/images/ad31d8e8-a96e-49c2-80bb-04532f94c230/1649821674175_이력서사진.jpeg --imgDirPath ad31d8e8-a96e-49c2-80bb-04532f94c230");
			
			Process p = Runtime.getRuntime().exec("/bin/sh -c /Users/chan/PersonalColor/pcbackend/src/main/resources/static/src/start.sh");
		    BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
		    String line = null;

		    while((line = br.readLine()) != null){
		        System.out.println(line);
		    }
		    p.waitFor();
		    p.destroy();
		    FileReader reader = new FileReader("/Users/chan/PersonalColor/pcbackend/src/main/resources/static/src/res.txt");
		    int ch;
		    while ((ch = reader.read()) != -1) {
		    	System.out.print("test =================> " + (char) ch);
		    }
		    return "seccess";

		}catch(Exception e){
		    //System.out.println(e);
		    return "failed";
		}
	}
	//15ef97ea-9d76-496a-89fa-d379b6761511/1649484307840_이력서사진.jpeg
}
